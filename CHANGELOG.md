# 更新日志

## v2.0 - Client-Server 架构版本 (2026-01-18)

### 重大变更

1. **架构重构：P2P → Client-Server**
   - 移除 Host/Guest P2P 模式
   - 新增独立服务器 `server.py`
   - 客户端连接服务器进行通信
   - 支持多客户端同时在线

2. **网络层完全重写**
   - 简化协议实现，内置到 `server.py` 和 `core/network.py`
   - 移除 `core/protocol.py`（协议代码已内联）
   - 消息广播自动排除发送者
   - 更可靠的连接管理

3. **信号系统修复**
   - 修复 `PetChatApp` 缺失 `super().__init__()` 的关键 Bug
   - 重构信号连接，确保跨线程通信正常

### 新增功能

1. **用户在线状态**
   - 实时显示在线用户列表
   - 用户加入/离开通知
   - 支持点击用户发起私聊

2. **改进的连接体验**
   - 启动时提示输入服务器 IP
   - 支持命令行参数 `--server-ip`
   - 连接状态实时显示

### 改进

1. **代码清理**
   - 移除所有 P2P/Host/Guest 相关代码
   - 移除未使用的 AI 网络信号
   - 简化网络管理器 API

2. **文档更新**
   - 更新 README.md 反映新架构
   - 更新 BUILD.md 打包指南
   - 更新 CHANGELOG.md

---

## v1.0 - MVP 版本

### 功能

1. **运行时 API 配置**
   - API 配置对话框
   - 支持运行时配置 API Key 和 API Base URL
   - 配置保存在 `config.json`

2. **记忆查看和管理**
   - 记忆查看器组件
   - 支持查看和清空记忆
   - 记忆按类别显示

3. **情绪宠物系统**
   - 情绪变化动画
   - 空闲时循环动画
   - 现代化 UI 设计

4. **现代化 UI**
   - iOS 风格暗黑主题
   - 圆润的边框和阴影
   - 标签页式布局

5. **打包支持**
   - PyInstaller 打包配置
   - Nuitka 打包支持
